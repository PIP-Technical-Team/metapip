<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>metapip in package development • metapip</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="metapip in package development">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">metapip</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/package_development.html">metapip in package development</a></li>
    <li><a class="dropdown-item" href="../articles/package-specific-options.html">package-specific-options</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PIP-Technical-Team/metapip/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>metapip in package development</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/PIP-Technical-Team/metapip/blob/DEV/vignettes/package_development.Rmd" class="external-link"><code>vignettes/package_development.Rmd</code></a></small>
      <div class="d-none name"><code>package_development.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="co"># devtools::load_all(".")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/PIP-Technical-Team/metapip" class="external-link">metapip</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="metapip-managing-pip-ecosystem-packages-for-development">metapip: Managing PIP Ecosystem Packages for Development<a class="anchor" aria-label="anchor" href="#metapip-managing-pip-ecosystem-packages-for-development"></a>
</h2>
<p>The <code>metapip</code> package is designed to make it easy to
manage all the packages in the PIP ecosystem. This is especially useful
for package development, as the PIP packages depend on each other—most
notably, like <code>pipfun</code>, which provides shared utilities.
Coordinating branches and versions across these packages is essential
for a smooth development workflow.</p>
</div>
<div class="section level2">
<h2 id="default-and-custom-branches">Default and Custom Branches<a class="anchor" aria-label="anchor" href="#default-and-custom-branches"></a>
</h2>
<p>To use the most recent version of a package, it’s important to know
which branch is considered the default for each package. By default, the
branch is available with <code><a href="../reference/get_default_branch.html">get_default_branch()</a></code>,</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_default_branch.html">get_default_branch</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "DEV_v2"</span></span></code></pre></div>
<p>and you can modify it with <code><a href="../reference/get_default_branch.html">set_default_branch()</a></code>. For
example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_default_branch.html">set_default_branch</a></span><span class="op">(</span><span class="st">"DEV"</span><span class="op">)</span></span></code></pre></div>
<p>However, not all packages’ most recent versions are available in the
same branch. Packages that do not use the default branch are tracked as
“custom branches.” You can see these with
<code><a href="../reference/set_custom_branch.html">get_custom_branch()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/set_custom_branch.html">get_custom_branch</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #0000BB; font-weight: bold;">metapip</span><span style="font-weight: bold;"> custom branches:</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">pipapi  </span>: <span style="color: #0000BB;">DEV</span> </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">pipfaker</span>: <span style="color: #0000BB;">main</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">wbpip   </span>: <span style="color: #0000BB;">DEV</span> </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">pipster </span>: <span style="color: #0000BB;">DEV</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="inspecting-and-modifying-branch-assignments">Inspecting and Modifying Branch Assignments<a class="anchor" aria-label="anchor" href="#inspecting-and-modifying-branch-assignments"></a>
</h2>
<p>To see all PIP ecosystem packages and their currently assigned
branches, use <code><a href="../reference/get_current_branches.html">get_current_branches()</a></code>. To get the branch for
a specific package, use
<code>get_package_current_branch(package)</code>. For example:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_current_branches.html">get_current_branches</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; ── <span style="color: #0000BB; font-weight: bold;">metapip</span><span style="font-weight: bold;"> current branches (default in </span><span style="color: #BB0000; font-weight: bold;">red</span><span style="font-weight: bold;">):</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">pipapi  </span>: <span style="color: #0000BB;">DEV</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">pipload </span>: <span style="color: #BB0000;">DEV_v2</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">wbpip   </span>: <span style="color: #0000BB;">DEV</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">pipfun  </span>: <span style="color: #BB0000;">DEV_v2</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">pipdata </span>: <span style="color: #BB0000;">DEV_v2</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">pipster </span>: <span style="color: #0000BB;">DEV</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">pipaux  </span>: <span style="color: #BB0000;">DEV_v2</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">pipfaker</span>: <span style="color: #0000BB;">main</span></span></span>
<span><span class="fu"><a href="../reference/get_current_branches.html">get_package_current_branch</a></span><span class="op">(</span><span class="st">"pipdata"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  pipdata </span></span>
<span><span class="co">#&gt; "DEV_v2"</span></span></code></pre></div>
<p>If you need to change the working branch for any package, use
<code><a href="../reference/set_custom_branch.html">set_custom_branch()</a></code>. For example, to set the
<code>pipdata</code> package to use the <code>main</code> branch and
<code>pipapi</code> to use <code>DEV_v3</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/set_custom_branch.html">set_custom_branch</a></span><span class="op">(</span>pipdata <span class="op">=</span> <span class="st">'main'</span>, pipapi <span class="op">=</span> <span class="st">'DEV_v3'</span><span class="op">)</span></span>
<span><span class="co">#&gt; ── <span style="color: #0000BB; font-weight: bold;">metapip</span><span style="font-weight: bold;"> custom branches:</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">pipapi  </span>: <span style="color: #0000BB;">DEV_v3</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">pipfaker</span>: <span style="color: #0000BB;">main</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">wbpip   </span>: <span style="color: #0000BB;">DEV</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">pipster </span>: <span style="color: #0000BB;">DEV</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">◌</span> <span style="color: #BBBB00;">pipdata </span>: <span style="color: #0000BB;">main</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="listing-core-packages">Listing Core Packages<a class="anchor" aria-label="anchor" href="#listing-core-packages"></a>
</h2>
<p>To get a list of all core PIP packages, use:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_core_pagkages.html">get_core_pagkages</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "pipapi"   "pipload"  "wbpip"    "pipfun"   "pipdata"  "pipster"  "pipaux"  </span></span>
<span><span class="co">#&gt; [8] "pipfaker"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="package-development-workflow">Package Development Workflow<a class="anchor" aria-label="anchor" href="#package-development-workflow"></a>
</h2>
<p>When developing a PIP package, it is important to ensure you are
using the most recent versions of all other PIP ecosystem packages, each
on their appropriate default branch. Typically, you can achieve this by
running <code><a href="../reference/init_metapip.html">metapip::update_pip_packages()</a></code>, which updates all
core PIP packages except the one you are currently developing.</p>
<p>If you want to both update and attach (i.e., load with
<code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code>) the PIP packages, use
<code><a href="../reference/init_metapip.html">metapip::init_metapip()</a></code>. Both functions automatically
detect your current working directory and exclude the package you are
developing from updates and attachment.</p>
<p>This behavior is managed by the <code><a href="../reference/get_core_pagkages.html">get_core_pagkages()</a></code>
function. By default, it returns all core PIP packages. However, when
called with <code>exclude = NA</code>, it checks if your working
directory is a PIP package and excludes it from the list.</p>
<p>For example, if you are working on the <code>pipapi</code> package,
<code>get_core_pagkages(exclude = NA)</code> will return all core
packages except <code>pipapi</code>. This ensures you do not
accidentally update or reload the package you are actively developing.
The following explains the logic behind the process. <strong>Do NOT use
this in your code</strong>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the same as get_core_pagkages() because the working directory </span></span>
<span><span class="co"># is not a PIP package</span></span>
<span><span class="fu"><a href="../reference/get_core_pagkages.html">get_core_pagkages</a></span><span class="op">(</span>exclude <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "pipapi"   "pipload"  "wbpip"    "pipfun"   "pipdata"  "pipster"  "pipaux"  </span></span>
<span><span class="co">#&gt; [8] "pipfaker"</span></span>
<span></span>
<span><span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_dir.html" class="external-link">with_dir</a></span><span class="op">(</span></span>
<span>  <span class="co"># Change working directory to fake pipapi</span></span>
<span>  <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/file_temp.html" class="external-link">path_temp</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="st">"pipapi"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html" class="external-link">dir_create</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="co"># Since the working directory is a PIP package, </span></span>
<span>  <span class="co"># it will be excluded </span></span>
<span>  <span class="fu"><a href="../reference/get_core_pagkages.html">get_core_pagkages</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "pipload"  "wbpip"    "pipfun"   "pipdata"  "pipster"  "pipaux"   "pipfaker"</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by R.Andrés Castañeda, Ronak Shah.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
